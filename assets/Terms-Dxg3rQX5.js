import{r,u as B,j as e,L as $,E as q,d as z,F as d,N as V,e as I,D as M,A as S,g as Q}from"./index-i3f7qJO0.js";function X(){const[u,_]=r.useState(null),[o,h]=r.useState(null),[m,y]=r.useState(!0),[g,b]=r.useState(!1),[w,a]=r.useState(!1),[F,l]=r.useState(),[p,c]=r.useState("term_num"),[x,j]=r.useState(""),[D,E]=r.useState(new Set),[A,T]=r.useState(new Set),[N,k]=r.useState(new Set),[R,v]=r.useState(new Set),[C,L]=r.useState(new Set),{language:f}=B();function P(t){h(n=>n?n.filter(s=>s.id!==t):null)}if(r.useEffect(()=>{async function t(){try{const n=await fetch(S+"/terms");if(n.ok){const s=await n.json();h(s),_(s),E(new Set(s.map(i=>i.term_num))),T(new Set(s.map(i=>i.repair_type_ar))),k(new Set(s.map(i=>i.repair_type_en))),v(new Set(s.map(i=>i.repair_desc_ar))),L(new Set(s.map(i=>i.repair_desc_en)))}}catch{b(!0)}finally{y(!1)}}t()},[]),m)return e.jsx($,{});if(g)return e.jsx(q,{});if(o?.length===0)return e.jsx("div",{className:"flex h-[300px] items-center justify-center text-black/20",children:e.jsx(z,{size:100})});if(o&&o.length)return e.jsxs("div",{children:[e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{className:"[&_button]:absolute [&_button]:-top-2 [&_button]:left-0 [&_button]:cursor-pointer [&_button]:bg-white [&_th]:relative [&_th]:font-bold",children:[e.jsxs("th",{children:["#"," ",e.jsx("button",{onClick:()=>{a(!0),c("term_num"),l(Array.from(D))},children:e.jsx(d,{})})]}),f==="english"?e.jsxs(e.Fragment,{children:[e.jsxs("th",{children:["Repair Type"," ",e.jsx("button",{onClick:()=>{a(!0),c("repair_type_en"),l(Array.from(N))},children:e.jsx(d,{})})]}),e.jsxs("th",{children:["Repair Description"," ",e.jsx("button",{onClick:()=>{a(!0),c("repair_desc_en"),l(Array.from(C))},children:e.jsx(d,{})})]}),e.jsx("th",{children:"Unit"}),e.jsx("th",{children:"Quantity"}),e.jsxs("th",{dir:"ltr",children:["Cost ","($)"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("th",{children:["نوع الصيانة"," ",e.jsx("button",{onClick:()=>{a(!0),c("repair_type_ar"),l(Array.from(A))},children:e.jsx(d,{})})]}),e.jsxs("th",{children:["وصف الصيانة"," ",e.jsx("button",{onClick:()=>{a(!0),c("repair_desc_ar"),l(Array.from(R))},children:e.jsx(d,{})})]}),e.jsx("th",{children:"الوحدة"}),e.jsx("th",{children:"الكمية"}),e.jsxs("th",{children:["التكلفة ","($)"]})]}),e.jsx("th",{className:"hide-when-print",children:"اجراءات"})]})}),e.jsx("tbody",{children:o.map((t,n)=>e.jsxs("tr",{children:[f==="english"?e.jsxs(e.Fragment,{children:[e.jsx("td",{children:t.term_num}),e.jsx("td",{children:t.repair_type_en}),e.jsx("td",{children:t.repair_desc_en}),e.jsx("td",{children:t.uom}),e.jsx("td",{children:t.qty})]}):e.jsxs(e.Fragment,{children:[e.jsx("td",{children:t.term_num}),e.jsx("td",{children:t.repair_type_ar}),e.jsx("td",{children:t.repair_desc_ar}),e.jsx("td",{children:t.uom}),e.jsx("td",{children:t.qty})]}),e.jsx("td",{children:t.service_cost}),e.jsxs("td",{className:"hide-when-print flex gap-1 border-0 border-l p-1",children:[e.jsx(V,{to:"/edit/term",className:"rounded bg-blue-500 p-2 px-3 text-white",state:{term:t},children:e.jsx(I,{size:16})}),e.jsx(M,{url:`${S}/terms/${t.id}`,id:t.id??0,deleteEffect:P})]})]},n))})]}),w&&e.jsx(Q,{data:F??[],selectedFilterValue:x,setSelectedFilterValue:j,onExit:()=>a(!1),onFilter:t=>{if(t.preventDefault(),!u||!p||!x)return;const n=u.filter(s=>String(s[p])===String(x));h(n),a(!1),j("")},onResetFilter:()=>{a(!1),h(u)}})]})}export{X as default};
