import{r as s,u as q,j as e,L as G,E as H,d as J,e as K,F as a,N as O,g as Q,D as U,A as y,h as W}from"./index-CA9om5it.js";function Y(){const[h,g]=s.useState(null),[x,o]=s.useState(null),[w,v]=s.useState(!1),[A,C]=s.useState(!0),[F,i]=s.useState(),[j,c]=s.useState("vehicle_code"),[u,_]=s.useState(""),[S,k]=s.useState(new Set),[E,N]=s.useState(new Set),[V,D]=s.useState(new Set),[m,L]=s.useState(new Set),[T,P]=s.useState(new Set),[M,$]=s.useState(new Set),[p,B]=s.useState(new Set),[f,R]=s.useState(new Set),[z,n]=s.useState(!1),{language:b}=q();function I(t){o(d=>d?d.filter(l=>l.id!==t):null)}if(s.useEffect(()=>{async function t(){try{const d=await fetch(y+"/vehicles");if(d.ok){const l=await d.json();o(l),g(l),k(new Set(l.map(r=>r.vehicle_code))),N(new Set(l.map(r=>r.vehicle_type_ar))),D(new Set(l.map(r=>r.vehicle_type_en))),L(new Set(l.map(r=>r.licence_number))),P(new Set(l.map(r=>r.vehicle_model_ar))),$(new Set(l.map(r=>r.vehicle_model_en))),B(new Set(l.map(r=>r.vehicle_dept))),R(new Set(l.map(r=>r.vehicle_state)))}}catch{v(!0)}finally{C(!1)}}t()},[]),A)return e.jsx(G,{});if(w)return e.jsx(H,{});if(x)return e.jsxs("div",{children:[e.jsx("div",{className:"hide-when-print p-5 pb-0 text-2xl font-bold",children:"بيانات الآليات"}),e.jsx("div",{className:"hide-when-print flex items-center justify-center pb-2",children:e.jsx(J,{onClick:()=>K(x??[])})}),e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{className:"[&_button]:absolute [&_button]:-top-2 [&_button]:left-0 [&_button]:cursor-pointer [&_button]:bg-white [&_th]:relative [&_th]:font-bold",children:[b==="english"?e.jsxs(e.Fragment,{children:[e.jsxs("th",{children:["Vehicle Code"," ",e.jsx("button",{onClick:()=>{n(!0),c("vehicle_code"),i(Array.from(S))},children:e.jsx(a,{})})]}),e.jsxs("th",{children:["Vehicle Type"," ",e.jsx("button",{onClick:()=>{n(!0),c("vehicle_type_en"),i(Array.from(V))},children:e.jsx(a,{})})]}),e.jsxs("th",{children:["Licence Number"," ",e.jsx("button",{onClick:()=>{n(!0),c("licence_number"),i(Array.from(m))},children:e.jsx(a,{})})]}),e.jsxs("th",{children:["Model"," ",e.jsx("button",{onClick:()=>{n(!0),c("vehicle_model_en"),i(Array.from(M))},children:e.jsx(a,{})})]}),e.jsxs("th",{children:["Department"," ",e.jsx("button",{onClick:()=>{n(!0),c("vehicle_dept"),i(Array.from(p))},children:e.jsx(a,{})})]}),e.jsxs("th",{children:["State"," ",e.jsx("button",{onClick:()=>{n(!0),c("vehicle_state"),i(Array.from(f))},children:e.jsx(a,{})})]}),e.jsx("th",{children:"Notes"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("th",{children:["كود المركبة"," ",e.jsx("button",{onClick:()=>{n(!0),c("vehicle_code"),i(Array.from(S))},children:e.jsx(a,{})})]}),e.jsxs("th",{children:[" ",e.jsx("button",{onClick:()=>{n(!0),c("vehicle_type_ar"),i(Array.from(E))},children:e.jsx(a,{})}),"نوع المركبة"]}),e.jsxs("th",{children:["رقم اللوحة"," ",e.jsx("button",{onClick:()=>{n(!0),c("licence_number"),i(Array.from(m))},children:e.jsx(a,{})})]}),e.jsxs("th",{children:["موديل"," ",e.jsx("button",{onClick:()=>{n(!0),c("vehicle_model_ar"),i(Array.from(T))},children:e.jsx(a,{})})]}),e.jsxs("th",{children:["القسم"," ",e.jsx("button",{onClick:()=>{n(!0),c("vehicle_dept"),i(Array.from(p))},children:e.jsx(a,{})})]}),e.jsxs("th",{children:["الحالة"," ",e.jsx("button",{onClick:()=>{n(!0),c("vehicle_state"),i(Array.from(f))},children:e.jsx(a,{})})]}),e.jsx("th",{children:"ملاحظات"})]}),e.jsx("th",{className:"hide-when-print",children:"اجراءات"})]})}),e.jsx("tbody",{children:x.map((t,d)=>e.jsxs("tr",{children:[b==="english"?e.jsxs(e.Fragment,{children:[e.jsx("td",{children:t.vehicle_code}),e.jsx("td",{dir:"ltr",children:t.vehicle_type_en}),e.jsx("td",{children:t.licence_number}),e.jsx("td",{dir:"ltr",children:t.vehicle_model_en}),e.jsx("td",{children:t.vehicle_dept}),e.jsx("td",{className:`${t.vehicle_state==="مدمرة"?"bg-red-200":t.vehicle_state==="لا تعمل"?"bg-yellow-200":"bg-green-200"}`,children:t.vehicle_state}),e.jsx("td",{children:t.notes??""})]}):e.jsxs(e.Fragment,{children:[e.jsx("td",{children:t.vehicle_code}),e.jsx("td",{children:t.vehicle_type_ar}),e.jsx("td",{children:t.licence_number}),e.jsx("td",{children:t.vehicle_model_ar}),e.jsx("td",{children:t.vehicle_dept}),e.jsx("td",{className:`${t.vehicle_state==="مدمرة"?"bg-red-200":t.vehicle_state==="لا تعمل"?"bg-yellow-200":"bg-green-200"}`,children:t.vehicle_state}),e.jsx("td",{children:t.notes??""})]}),e.jsxs("td",{className:"hide-when-print flex gap-1 border-0 border-l p-1",children:[e.jsx(O,{to:"/edit/vehicle",className:"rounded bg-blue-500 p-2 px-3 text-white",state:{vehicle:t},children:e.jsx(Q,{size:16})}),e.jsx(U,{url:`${y}/vehicles/${t.id}`,id:t.id??0,deleteEffect:I})]})]},d))})]}),z&&e.jsx(W,{data:F??[],selectedFilterValue:u,setSelectedFilterValue:_,onExit:()=>n(!1),onFilter:t=>{if(t.preventDefault(),!h||!j||!u)return;const d=h.filter(l=>String(l[j])===String(u));o(d),n(!1),_("")},onResetFilter:()=>{n(!1),o(h)}})]})}export{Y as default};
