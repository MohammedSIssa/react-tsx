import{G as U,r as s,p as X,g as Y,u as Z,j as e,L as ee,E as te,d as se,e as ne,F as re,h as o,i as le,k as ie,N as ae,l as ce,D as oe,A as N,m as de}from"./index-DhCui_wH.js";function he(h){return U({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M228.9 79.9L51.8 403.1C40.6 423.3 55.5 448 78.9 448h354.3c23.3 0 38.2-24.7 27.1-44.9L283.1 79.9c-11.7-21.2-42.5-21.2-54.2 0zM273.6 214L270 336h-28l-3.6-122h35.2zM256 402.4c-10.7 0-19.1-8.1-19.1-18.4s8.4-18.4 19.1-18.4 19.1 8.1 19.1 18.4-8.4 18.4-19.1 18.4z"},child:[]}]})(h)}function ue(){const[h,C]=s.useState(null),[d,u]=s.useState(null),[z,A]=s.useState(!1),[k,F]=s.useState(!0),[j,p]=s.useState(1),[x,E]=s.useState(15),[b,L]=s.useState(0),[V,D]=s.useState(null);s.useEffect(()=>{if(d!==null){const t=X(d,j,x),n=Y(d,x);L(n),D(t)}},[j,d,x]),s.useEffect(()=>{p(1)},[x]);const[P,a]=s.useState(),[f,c]=s.useState("vehicle_code"),[m,_]=s.useState(""),[g,T]=s.useState(new Set),[M,B]=s.useState(new Set),[I,$]=s.useState(new Set),[S,G]=s.useState(new Set),[R,W]=s.useState(new Set),[q,H]=s.useState(new Set),[w,J]=s.useState(new Set),[v,K]=s.useState(new Set),[O,r]=s.useState(!1),{language:y}=Z();function Q(t){u(n=>n?n.filter(i=>i.id!==t):null)}if(s.useEffect(()=>{async function t(){try{const n=await fetch(N+"/vehicles");if(n.ok){const i=await n.json();u(i),C(i),T(new Set(i.map(l=>l.vehicle_code))),B(new Set(i.map(l=>l.vehicle_type_ar))),$(new Set(i.map(l=>l.vehicle_type_en))),G(new Set(i.map(l=>l.licence_number))),W(new Set(i.map(l=>l.vehicle_model_ar))),H(new Set(i.map(l=>l.vehicle_model_en))),J(new Set(i.map(l=>l.vehicle_dept))),K(new Set(i.map(l=>l.vehicle_state)))}}catch{A(!0)}finally{F(!1)}}t()},[]),k)return e.jsx(ee,{});if(z)return e.jsx(te,{});if(d)return e.jsxs("div",{children:[e.jsx("div",{className:"hide-when-print p-5 pb-2 text-2xl font-bold",children:"بيانات الآليات"}),e.jsxs("div",{className:"hide-when-print flex items-center gap-2 px-5 pb-2",children:[e.jsx(se,{onClick:()=>ne(d??[])}),e.jsx("button",{className:"flex cursor-pointer items-center gap-2 rounded-lg bg-blue-500 p-2 text-white transition-all duration-200 hover:bg-blue-600",onClick:()=>window.print(),children:e.jsx(re,{size:20})})]}),e.jsxs("table",{className:"mb-25 **:text-xs",children:[e.jsx("thead",{className:"bg-slate-800 font-bold text-white",children:e.jsxs("tr",{className:"[&_button]:absolute [&_button]:top-1 [&_button]:left-1 [&_button]:cursor-pointer [&_button]:text-slate-300 [&_th]:relative [&_th]:border-r [&_th]:border-l [&_th]:border-slate-400 [&_th]:font-bold",children:[y==="english"?e.jsxs(e.Fragment,{children:[e.jsxs("th",{children:["Vehicle Code"," ",e.jsx("button",{onClick:()=>{r(!0),c("vehicle_code"),a(Array.from(g))},children:e.jsx(o,{size:10})})]}),e.jsxs("th",{children:["Vehicle Type"," ",e.jsx("button",{onClick:()=>{r(!0),c("vehicle_type_en"),a(Array.from(I))},children:e.jsx(o,{size:10})})]}),e.jsxs("th",{children:["Licence Number"," ",e.jsx("button",{onClick:()=>{r(!0),c("licence_number"),a(Array.from(S))},children:e.jsx(o,{size:10})})]}),e.jsxs("th",{children:["Model"," ",e.jsx("button",{onClick:()=>{r(!0),c("vehicle_model_en"),a(Array.from(q))},children:e.jsx(o,{size:10})})]}),e.jsxs("th",{children:["Department"," ",e.jsx("button",{onClick:()=>{r(!0),c("vehicle_dept"),a(Array.from(w))},children:e.jsx(o,{size:10})})]}),e.jsxs("th",{children:["State"," ",e.jsx("button",{onClick:()=>{r(!0),c("vehicle_state"),a(Array.from(v))},children:e.jsx(o,{size:10})})]}),e.jsx("th",{children:"Notes"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("th",{children:["كود المركبة"," ",e.jsx("button",{onClick:()=>{r(!0),c("vehicle_code"),a(Array.from(g))},children:e.jsx(o,{size:10})})]}),e.jsxs("th",{children:[" ",e.jsx("button",{onClick:()=>{r(!0),c("vehicle_type_ar"),a(Array.from(M))},children:e.jsx(o,{size:10})}),"نوع المركبة"]}),e.jsxs("th",{children:["رقم اللوحة"," ",e.jsx("button",{onClick:()=>{r(!0),c("licence_number"),a(Array.from(S))},children:e.jsx(o,{size:10})})]}),e.jsxs("th",{children:["موديل"," ",e.jsx("button",{onClick:()=>{r(!0),c("vehicle_model_ar"),a(Array.from(R))},children:e.jsx(o,{size:10})})]}),e.jsxs("th",{children:["القسم"," ",e.jsx("button",{onClick:()=>{r(!0),c("vehicle_dept"),a(Array.from(w))},children:e.jsx(o,{size:10})})]}),e.jsxs("th",{children:["الحالة"," ",e.jsx("button",{onClick:()=>{r(!0),c("vehicle_state"),a(Array.from(v))},children:e.jsx(o,{size:10})})]}),e.jsx("th",{children:"ملاحظات"})]}),e.jsx("th",{className:"hide-when-print",children:"اجراءات"})]})}),e.jsx("tbody",{className:"[&_tr]:odd:bg-neutral-100 [&_tr]:even:bg-neutral-200 [&_tr]:last-of-type:bg-white",children:V?.map((t,n)=>e.jsxs("tr",{children:[y==="english"?e.jsxs(e.Fragment,{children:[e.jsx("td",{children:t.vehicle_code}),e.jsx("td",{dir:"ltr",children:t.vehicle_type_en}),e.jsx("td",{children:t.licence_number}),e.jsx("td",{dir:"ltr",children:t.vehicle_model_en})]}):e.jsxs(e.Fragment,{children:[e.jsx("td",{children:t.vehicle_code}),e.jsx("td",{children:t.vehicle_type_ar}),e.jsx("td",{children:t.licence_number}),e.jsx("td",{children:t.vehicle_model_ar}),e.jsx("td",{children:t.vehicle_dept})]}),e.jsx("td",{children:e.jsxs("span",{className:`flex h-fit w-fit items-center gap-2 rounded-xl p-2 px-4 ${t.vehicle_state==="مدمرة"?"bg-red-200 text-red-900":t.vehicle_state==="لا تعمل"?"bg-yellow-200 text-yellow-900":"bg-green-200 text-green-900"}`,children:[e.jsx("span",{className:"hide-when-print",children:t.vehicle_state==="تعمل"?e.jsx(le,{size:16}):t.vehicle_state==="لا تعمل"?e.jsx(he,{size:18}):e.jsx(ie,{size:16})}),t.vehicle_state]})}),e.jsx("td",{children:t.notes??""}),e.jsxs("td",{className:"hide-when-print flex gap-1 p-1",children:[e.jsx(ae,{to:"/edit/vehicle",className:"rounded border-0 bg-slate-700 p-2 px-3 text-white",state:{vehicle:t},children:e.jsx(ce,{size:16})}),e.jsx(oe,{url:`${N}/vehicles/${t.id}`,id:t.id??0,deleteEffect:Q})]})]},n))})]}),O&&e.jsx(de,{data:P??[],selectedFilterValue:m,setSelectedFilterValue:_,onExit:()=>r(!1),onFilter:t=>{if(t.preventDefault(),!h||!f||!m)return;const n=h.filter(i=>String(i[f])===String(m));p(1),u(n),r(!1),_("")},onResetFilter:()=>{r(!1),u(h)}}),e.jsxs("div",{className:"hide-when-print fixed bottom-0 mt-4 flex h-20 w-full items-center justify-between bg-slate-800 p-2 px-10",children:[e.jsx("div",{children:b>1&&Array.from({length:b}).map((t,n)=>e.jsx("button",{onClick:()=>p(n+1),className:`h-fit cursor-pointer border-r border-l border-slate-800 px-3 py-1 shadow-sm transition-colors duration-200 ${j===n+1?"bg-slate-600 font-semibold text-white":"bg-gray-100 text-gray-800"} `,children:n+1},n))}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-white",children:"عدد السطور: "}),e.jsxs("select",{value:x,onChange:t=>E(Number(t.target.value)),className:"w-30 bg-slate-700 p-2 text-white focus:outline-0 [&_option]:bg-slate-700",children:[e.jsx("option",{value:5,children:"5"}),e.jsx("option",{value:10,children:"10"}),e.jsx("option",{value:15,children:"15"}),e.jsx("option",{value:20,children:"20"}),e.jsx("option",{value:30,children:"30"}),e.jsx("option",{value:9999,children:"كل السطور"})]})]})]})]})}export{ue as default};
